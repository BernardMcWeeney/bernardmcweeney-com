---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";

interface Props {
  title: string;
  description?: string;
  image?: string;
  prompt?: string; // e.g. "> cat about.md"
}
const { title, description, image, prompt } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={title} description={description} image={image} />
  </head>
  <body class="min-h-dvh flex flex-col">
    <a href="#content" class="sr-only focus:not-sr-only focus:fixed focus:left-3 focus:top-3 focus:z-[100] btn">Skip to content</a>

    <Header />

    <main id="content" class="flex-1">
      <!-- Hero (consistent inner padding) -->
      <section class="panel corners" aria-label="page-hero" style="margin: 1.25rem auto; max-width: 64rem;">
        <span class="sq tl"></span><span class="sq tr"></span><span class="sq bl"></span><span class="sq br"></span>
        <div class="head" style="padding:.9rem 1rem;">
          <div class="icon">â‰¡</div>
          <div class="font-mono text-sm">{prompt ? prompt : "> open page"}</div>
        </div>
        <div class="body" style="padding:1.25rem;">
          <h1 class="text-[clamp(1.8rem,3.5vw,2.6rem)] leading-tight mb-2">{title}</h1>
          {description && <p class="text-[color:var(--muted)] max-w-prose">{description}</p>}
        </div>
      </section>

      <!-- Page content wrapper with comfortable gutters -->
      <section style="margin: 1.25rem auto; max-width: 64rem; padding-inline: 1rem;">
        <slot />
      </section>
    </main>

    <Footer />

    <script>
      document.addEventListener('click', (e) => {
        const a = e.target.closest('a[href^="#"]');
        if (!a) return;
        const el = document.querySelector(a.getAttribute('href'));
        if (!el) return;
        e.preventDefault();
        el.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
    </script>
  </body>
</html>
