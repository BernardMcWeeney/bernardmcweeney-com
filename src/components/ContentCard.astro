---
interface Props {
  href: string;
  title: string;
  description?: string;
  date?: Date | string;
  badge?: string;
  tags?: string[];
}

const { href, title, description, date, badge, tags = [] } = Astro.props;

const formattedDate = date ? new Date(date).toLocaleDateString('en-IE', {
  year: 'numeric',
  month: 'short',
  day: 'numeric',
}) : null;
---

<a href={href} class="card card-interactive block p-4 no-underline group">
  <div class="flex items-start justify-between gap-3">
    <div class="min-w-0 flex-1">
      <h3 class="font-mono text-base font-medium text-[var(--color-text-primary)] group-hover:text-[var(--color-brand)] transition-colors truncate">
        {title}
      </h3>
      
      {description && (
        <p class="text-sm text-[var(--color-text-muted)] mt-1 line-clamp-2">
          {description}
        </p>
      )}
      
      <div class="flex items-center gap-2 mt-2 flex-wrap">
        {formattedDate && (
          <span class="text-xs font-mono text-[var(--color-text-dimmed)]">
            {formattedDate}
          </span>
        )}
        
        {tags.length > 0 && (
          <>
            {formattedDate && <span class="text-[var(--color-text-dimmed)]">Â·</span>}
            {tags.slice(0, 3).map(tag => (
              <span class="badge">{tag}</span>
            ))}
          </>
        )}
      </div>
    </div>
    
    {badge && (
      <span class="badge badge-brand flex-shrink-0">
        {badge}
      </span>
    )}
  </div>
</a>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>