<section class="widget corners">
  <span class="sq tl"></span><span class="sq br"></span>
  <div class="head"><span class="icon">TZ</span> Local Time</div>

  <div class="body text-sm flex items-center justify-between gap-4">
    <!-- LEFT: details -->
    <div>
      <div class="font-mono text-lg" id="clock">—:—:—</div>
      <div class="text-[color:var(--muted)]" id="tz">—</div>
      <div class="mt-2 meter"><span id="daybar"></span></div>
    </div>

    <!-- RIGHT: satellite inside viz -->
    <div class="viz">
    <div class="orbit" id="orbit">
        <div class="planet"></div>
        <div class="orbit-core">
        <div class="satellite"></div>
        </div>
    </div>
    </div>
</section>

<script>
  const clock = document.getElementById('clock');
  const tzEl  = document.getElementById('tz');
  const bar   = document.getElementById('daybar');
  const orbit = document.getElementById('orbit');

  function tick(){
    const d = new Date();
    clock.textContent = d.toLocaleTimeString();
    tzEl.textContent = Intl.DateTimeFormat().resolvedOptions().timeZone + " · " + d.toDateString();
    const pct = ((d.getHours()*3600 + d.getMinutes()*60 + d.getSeconds()) / 86400) * 100;
    bar.style.width = pct + "%";

    // lock the satellite briefly at the top each minute
    const s = d.getSeconds();
    if (s === 0 || s === 1) orbit.classList.add('lock');
    else orbit.classList.remove('lock');
  }
  tick(); setInterval(tick, 1000);
</script>
