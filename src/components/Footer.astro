---
const year = new Date().getFullYear();
---

<footer class="mt-14 border-t border-[color:var(--border)] bg-[color:var(--paper)] corners relative">
  <!-- Two top corner squares only -->
  <span class="sq tl"></span>
  <span class="sq tr"></span>

  <div class="container py-10 grid gap-8 md:grid-cols-3">
    <!-- About -->
    <section class="panel p-4 corners">
	  <span class="sq tl"></span><span class="sq tr"></span><span class="sq bl"></span><span class="sq br"></span>
      <h2 class="font-mono mb-2">About</h2>
      <p class="text-[color:var(--muted)] text-sm">
        Bernard’s personal ecosystem for writing, projects, and build logs — modern-retro, square corners, honest edges.
      </p>
    </section>

    <!-- Links -->
    <section class="panel p-4 corners">
	  <span class="sq tl"></span><span class="sq tr"></span><span class="sq bl"></span><span class="sq br"></span>
      <h2 class="font-mono mb-2">Links</h2>
      <nav class="grid grid-cols-2 gap-2 text-sm">
        <a class="btn" href="/">home</a>
        <a class="btn" href="/about/">about</a>
        <a class="btn" href="/blog/">blog</a>
        <a class="btn" href="/projects/">projects</a>
        <a class="btn" href="/notes/">notes</a>
        <a class="btn" href="/archive/">archive</a>
      </nav>
    </section>

    <!-- Connect -->
    <section class="panel p-4 corners">
	  <span class="sq tl"></span><span class="sq tr"></span><span class="sq bl"></span><span class="sq br"></span>
      <h2 class="font-mono mb-2">Connect</h2>
      <div class="flex flex-wrap gap-2">
        <a class="btn" href="mailto:hello@bernardmcweeney.com">email</a>
        <a class="btn" href="/rss.xml">rss</a>
        <a class="btn" href="https://github.com/BernardMcWeeney" rel="me">github</a>
        <a class="btn" href="https://x.com/BMcWeeneyIE" rel="me">x.com</a>
      </div>
    </section>
  </div>

  <div class="rule"></div>

  <div class="container py-4 flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
    <p class="text-xs font-mono text-[color:var(--muted)]">© {year} Bernard McWeeney. Hosted on Cloudflare.</p>
    <div class="inline-flex items-center gap-2">
      <span id="status-dot" class="w-2 h-2 rounded-full bg-[color:var(--brand)] animate-pulse"></span>
      <span id="status-text" class="text-xs font-mono text-[color:var(--muted)]">Online</span>
    </div>
  </div>

  <script is:inline>
    // Online indicator: green (online), red (offline), orange (reconnecting)
    const dot = document.getElementById('status-dot');
    const text = document.getElementById('status-text');

    function setState(state){
      const map = {
        online:  "background-color:#22c55e",
        offline: "background-color:#ef4444",
        shaky:   "background-color:#f97316"
      };
      if (dot) dot.style = map[state] ?? map.online;
      if (text) text.textContent = state === 'offline' ? 'Offline' : state === 'shaky' ? 'Reconnecting…' : 'Online';
    }

    function update(){
      setState(navigator.onLine ? 'online' : 'offline');
    }
    window.addEventListener('online', () => { setState('shaky'); setTimeout(update, 1200); });
    window.addEventListener('offline', update);
    update();
  </script>
</footer>
