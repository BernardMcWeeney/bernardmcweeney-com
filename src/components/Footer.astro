---
const year = new Date().getFullYear();

const footerLinks = {
  site: [
    { href: '/', label: 'Home' },
    { href: '/about/', label: 'About' },
    { href: '/blog/', label: 'Blog' },
    { href: '/projects/', label: 'Projects' },
  ],
  connect: [
    { href: 'mailto:hello@bernardmcweeney.com', label: 'Email' },
    { href: 'https://github.com/BernardMcWeeney', label: 'GitHub', external: true },
    { href: 'https://x.com/BMcWeeneyIE', label: 'X', external: true },
    { href: '/rss.xml', label: 'RSS' },
  ],
};
---

<footer class="mt-auto border-t border-[var(--color-border)] bg-[var(--color-bg-surface)]">
  <div class="container py-12">
    <div class="grid gap-8 md:grid-cols-4">
      <!-- Brand -->
      <div class="md:col-span-2">
        <a href="/" class="font-mono text-lg font-semibold text-[var(--color-text-primary)] no-underline">
          bernard<span class="text-[var(--color-brand)]">_</span>mcweeney
        </a>
        <p class="mt-3 text-sm text-[var(--color-text-muted)] max-w-sm">
          IT administrator, web developer, and technology enthusiast. Building things, writing about the process.
        </p>
      </div>

      <!-- Site Links -->
      <div>
        <h4 class="font-mono text-xs font-semibold uppercase tracking-wider text-[var(--color-text-muted)] mb-3">
          Site
        </h4>
        <nav class="flex flex-col gap-2">
          {footerLinks.site.map(link => (
            <a 
              href={link.href} 
              class="text-sm text-[var(--color-text-secondary)] hover:text-[var(--color-brand)] transition-colors"
            >
              {link.label}
            </a>
          ))}
        </nav>
      </div>

      <!-- Connect Links -->
      <div>
        <h4 class="font-mono text-xs font-semibold uppercase tracking-wider text-[var(--color-text-muted)] mb-3">
          Connect
        </h4>
        <nav class="flex flex-col gap-2">
          {footerLinks.connect.map(link => (
            <a 
              href={link.href} 
              class="text-sm text-[var(--color-text-secondary)] hover:text-[var(--color-brand)] transition-colors"
              {...(link.external ? { target: '_blank', rel: 'noopener noreferrer' } : {})}
            >
              {link.label}
              {link.external && (
                <svg class="inline-block w-3 h-3 ml-1 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
                </svg>
              )}
            </a>
          ))}
        </nav>
      </div>
    </div>

    <!-- Bottom bar -->
    <div class="mt-10 pt-6 border-t border-[var(--color-border)] flex flex-col sm:flex-row items-center justify-between gap-4">
      <p class="text-xs font-mono text-[var(--color-text-dimmed)]">
        © {year} Bernard McWeeney
      </p>
      
      <!-- Status indicator -->
      <div class="flex items-center gap-2">
        <span id="status-dot" class="status-dot"></span>
        <span id="status-text" class="text-xs font-mono text-[var(--color-text-dimmed)]">
          Online
        </span>
        <span class="text-xs font-mono text-[var(--color-text-dimmed)]">
          · Hosted on Cloudflare
        </span>
      </div>
    </div>
  </div>
</footer>

<script>
  const dot = document.getElementById('status-dot');
  const text = document.getElementById('status-text');

  function updateStatus() {
    const online = navigator.onLine;
    if (dot) {
      dot.classList.toggle('status-dot--offline', !online);
    }
    if (text) {
      text.textContent = online ? 'Online' : 'Offline';
    }
  }

  window.addEventListener('online', updateStatus);
  window.addEventListener('offline', updateStatus);
  updateStatus();
</script>